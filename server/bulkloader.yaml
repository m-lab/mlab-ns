# Autogenerated bulkloader.yaml file.

# If you have module(s) with your model classes, add them here. Also
# change the kind properties to model_class.
python_preamble:
- import: base64
- import: re
- import: google.appengine.ext.bulkload.transform
- import: google.appengine.ext.bulkload.bulkloader_wizard
- import: google.appengine.ext.db
- import: google.appengine.api.datastore
- import: google.appengine.api.users

transformers:

- kind: CountryCode
  connector: csv
  connector_options:
      encoding: utf-8
  property_map:
    - property: __key__
      external_name: alpha2_code
      import_transform: transform.create_foreign_key('CountryCode')

    - property: alpha2_code
      external_name: alpha2_code

    - property: alpha3_code
      external_name: alpha3_code

    - property: latitude
      external_name: latitude
      import_transform: transform.none_if_empty(float)

    - property: longitude
      external_name: longitude
      import_transform: transform.none_if_empty(float)

    - property: name
      external_name: name

    - property: numeric_code
      external_name: numeric_code
      import_transform: transform.none_if_empty(int)


- kind: MaxmindCityLocation
  connector: csv
  connector_options:
      encoding: utf-8
  property_map:
    - property: __key__
      external_name: location_id
      import_transform: transform.create_foreign_key('MaxmindCityLocation')
      export_transform: transform.key_id_or_name_as_string

    - property: city
      external_name: city

    - property: country
      external_name: country

    - property: latitude
      external_name: latitude
      import_transform: transform.none_if_empty(float)

    - property: location_id
      external_name: location_id

    - property: longitude
      external_name: longitude
      import_transform: transform.none_if_empty(float)

    - property: region
      external_name: region


- kind: Nagios
  connector: csv
  connector_options:
      encoding: utf-8
  property_map:
    - property: __key__
      external_name: index
      import_transform: "lambda x: 'default'"
      export_transform: transform.key_id_or_name_as_string

    - property: username
      external_name: username

    - property: password
      external_name: password

    - property: url
      external_name: url


- kind: Prometheus
  connector: csv
  connector_options:
      encoding: utf-8
  property_map:
    - property: __key__
      external_name: index
      import_transform: "lambda x: 'prometheus_default'"
      export_transform: transform.key_id_or_name_as_string

    - property: username
      external_name: username

    - property: password
      external_name: password

    - property: url
      external_name: url


- kind: Site
  connector: csv
  connector_options:
      encoding: utf-8
  property_map:
    - property: __key__
      external_name: site_id
      import_transform: transform.create_foreign_key('Site')
      export_transform: transform.key_id_or_name_as_string

    - property: site_id
      external_name: site_id

    - property: city
      external_name: city

    - property: country
      external_name: country

    - property: latitude
      external_name: latitude
      import_transform: transform.none_if_empty(float)

    - property: longitude
      external_name: longitude
      import_transform: transform.none_if_empty(float)

    - property: metro
      external_name: metro
      import_transform: "lambda x: x.split(',')"
      export_transform: "','.join"

    - property: registration_timestamp
      external_name: registration_timestamp
      import_transform: transform.none_if_empty(int)
      export_transform: str

    - property: roundrobin
      external_name: roundrobin

    - property: when
      external_name: when
      import_transform: transform.import_date_time('%Y-%m-%dT%H:%M:%S')
      export_transform: transform.export_date_time('%Y-%m-%dT%H:%M:%S')


- kind: SliverTool
  connector: csv
  connector_options:
      encoding: utf-8
  property_map:
    - property: __key_
      external_name: sliver_tool_id
      import_transform: transform.create_foreign_key('SliverTool')
      export_transform: transform.key_id_or_name_as_string

    - property: tool_id
      external_name: tool_id

    - property: city
      external_name: city

    - property: country
      external_name: country

    - property: fqdn
      external_name: fqdn

    - property: http_port
      external_name: http_port

    - property: latitude
      external_name: latitude
      import_transform: transform.none_if_empty(float)

    - property: longitude
      external_name: longitude
      import_transform: transform.none_if_empty(float)

    - property: server_id
      external_name: server_id

    - property: site_id
      external_name: site_id

    - property: slice_id
      external_name: slice_id

    - property: sliver_ipv4
      external_name: sliver_ipv4

    - property: sliver_ipv6
      external_name: sliver_ipv6

    - property: status_ipv4
      external_name: status_ipv4

    - property: status_ipv6
      external_name: status_ipv6

    - property: tool_extra
      external_name: tool_extra

    - property: update_request_timestamp
      external_name: update_request_timestamp
      import_transform: transform.none_if_empty(int)
      export_transform: str

    - property: when
      external_name: when
      import_transform: transform.import_date_time('%Y-%m-%dT%H:%M:%S')
      export_transform: transform.export_date_time('%Y-%m-%dT%H:%M:%S')


- kind: Tool
  connector: csv
  connector_options:
      encoding: utf-8
  property_map:
    - property: __key__
      external_name: tool_id
      import_transform: transform.create_foreign_key('Tool')
      export_transform: transform.key_id_or_name_as_string

    - property: tool_id
      external_name: tool_id

    - property: slice_id
      external_name: slice_id

    - property: http_port
      external_name: http_port

    - property: status_source
      external_name: status_source

    - property: show_tool_extra
      external_name: show_tool_extra
      import_transform: transform.regexp_bool('true', re.IGNORECASE)


- kind: RedirectProbability
  connector: csv
  connector_options:
      encoding: utf-8
  property_map:
    - property: __key__
      external_name: name
      export_transform: transform.key_id_or_name_as_string

    - property: probability
      external_name: probability

    - property: url
      external_name: url
